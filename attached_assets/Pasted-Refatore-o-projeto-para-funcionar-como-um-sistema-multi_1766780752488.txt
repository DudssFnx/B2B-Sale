Refatore o projeto para funcionar como um sistema multi-loja (multi-tenant), garantindo que ele funcione corretamente fora do Replit (ambiente local e Vercel), sem dependÃªncias especÃ­ficas do Replit, mantendo o banco de dados jÃ¡ configurado no Railway e sem quebrar funcionalidades existentes.

ğŸŒ COMPATIBILIDADE (CRÃTICO)

O projeto nÃ£o pode depender de recursos exclusivos do Replit

Remover qualquer:

plugin do Replit

path absoluto do Replit

runtime especÃ­fico

Garantir funcionamento idÃªntico em:

ambiente local

Replit

Vercel

Usar apenas:

Vite padrÃ£o

Node.js padrÃ£o

variÃ¡veis de ambiente (process.env)

ğŸ”— CATÃLOGO PÃšBLICO POR LOJA (SEM LOGIN)

Implementar rotas pÃºblicas no formato:

/loja/:slug


Cada cliente (loja) possui um slug Ãºnico

Essa pÃ¡gina:

nÃ£o exige login

carrega dados da loja pelo slug

exibe apenas produtos daquela loja

Criar endpoint:

GET /api/public/store/:slug

ğŸ¨ LAYOUT CONFIGURÃVEL POR LOJA (ANTES DO LOGIN)

Criar uma estrutura de configuraÃ§Ã£o da loja, controlada pelo painel do cliente, sem permitir customizaÃ§Ã£o de cÃ³digo.

Requisitos:

Layout base Ãºnico (nÃ£o criar layouts diferentes por loja)

SeÃ§Ãµes controladas por configuraÃ§Ã£o:

banner principal (imagem + tÃ­tulo + subtÃ­tulo)

destaques

categorias

produtos em destaque

botÃ£o WhatsApp

Cada seÃ§Ã£o deve poder ser:

ativada/desativada

ter textos editÃ¡veis

ter imagens configurÃ¡veis

Exemplo de controle:

Checkbox: â€œExibir bannerâ€

Campo texto: â€œTÃ­tulo do bannerâ€

Upload/URL: â€œImagem do bannerâ€

Essas configuraÃ§Ãµes devem refletir automaticamente no catÃ¡logo pÃºblico /loja/:slug.

ğŸ§‘â€ğŸ’¼ PAINEL DO CLIENTE (ADMIN DA LOJA)

Cliente logado administra apenas sua loja

Pode:

editar produtos

ver pedidos

editar configuraÃ§Ãµes visuais da loja

NÃ£o pode acessar dados de outras lojas

ğŸ‘‘ PAINEL ADMIN MASTER (GLOBAL)

Criar papel ADMIN_MASTER com acesso global:

Visualizar todas as lojas

Ver mÃ©tricas por loja:

faturamento

pedidos

ticket mÃ©dio

Ver mÃ©tricas gerais do sistema

Nenhuma loja especÃ­fica associada ao admin master

ğŸ—„ï¸ BANCO DE DADOS (IMPORTANTE)

NÃ£o alterar o banco do Railway sem necessidade

Reutilizar tabelas existentes sempre que possÃ­vel

Caso necessÃ¡rio, adicionar:

tabela stores

tabela ou campo store_settings

Evitar migraÃ§Ãµes destrutivas

ğŸ¯ OBJETIVO FINAL

Sistema SaaS multi-loja

Cada cliente com:

catÃ¡logo pÃºblico

painel administrativo

VocÃª com:

painel global

visÃ£o estratÃ©gica do negÃ³cio

CÃ³digo limpo, portÃ¡vel e pronto para produÃ§Ã£o