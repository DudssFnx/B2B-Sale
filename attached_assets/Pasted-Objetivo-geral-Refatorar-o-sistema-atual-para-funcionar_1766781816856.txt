Objetivo geral
Refatorar o sistema atual para funcionar como um SaaS multi-empresa real, com:

lojas p√∫blicas por empresa (/loja/:slug)

dados totalmente isolados por empresa (produtos, categorias, pedidos, banners)

painel admin global (super admin)

compat√≠vel com Vercel (frontend) e Railway (backend + banco)
‚ö†Ô∏è N√£o depender de nenhuma feature exclusiva do Replit

1Ô∏è‚É£ MULTI-EMPRESA (ISOLAMENTO DE DADOS)

Refatorar todo o sistema para que nenhum dado de uma empresa apare√ßa em outra.

A√ß√µes obrigat√≥rias:

Usar a tabela companies como entidade central

Garantir que TODAS as entidades abaixo tenham company_id (FK):

products
b2b_products
categories
catalog_slides
catalog_banners
orders
b2b_orders
coupons
price_tables
customer_prices
site_settings


Atualizar queries para SEMPRE filtrar por company_id

Nunca usar dados globais por padr√£o

2Ô∏è‚É£ SLUG DA LOJA (URL P√öBLICA)

Adicionar suporte a lojas p√∫blicas por URL:

/site.com/loja/:slug

Backend:

Adicionar coluna slug (UNIQUE, NOT NULL) na tabela companies

Resolver empresa por slug

Retornar:

dados da empresa

cat√°logo

banners

configura√ß√µes visuais

Frontend:

Criar rota p√∫blica:

/loja/:slug


Carregar tudo baseado no slug

N√£o exigir login para visualizar cat√°logo

3Ô∏è‚É£ CAT√ÅLOGO PERSONALIZ√ÅVEL POR EMPRESA

Cada empresa deve poder configurar sua pr√≥pria vitrine, sem c√≥digo.

Usar as tabelas j√° existentes:

catalog_config

catalog_banners

catalog_slides

site_settings

Funcionalidades esperadas no painel do cliente:

Ativar/desativar se√ß√µes:

banner principal

lan√ßamentos

categorias

destaques

Definir textos:

headline

subt√≠tulo

CTA

Escolher imagens dos banners

Ordem das se√ß√µes

‚ö†Ô∏è Usar layout pr√©-definido, apenas configur√°vel (n√£o permitir layout livre).

4Ô∏è‚É£ LOGIN E CONTEXTO DE EMPRESA

Usu√°rio loga por email/senha

Usu√°rio pertence a UMA ou MAIS empresas (user_companies)

Ao logar:

definir activeCompanyId

todo painel passa a operar nesse contexto

Usu√°rio n√£o escolhe empresa por URL

Loja p√∫blica n√£o depende de login

5Ô∏è‚É£ PAINEL ADMIN GLOBAL (SUPER ADMIN)

Criar/garantir um painel exclusivo de administrador do sistema:

Permiss√µes:

Ver todas as empresas (companies)

Ver m√©tricas por empresa:

pedidos

faturamento

produtos ativos

Ativar/desativar empresas

Aprovar empresas (approval_status)

N√£o misturar com painel do cliente

6Ô∏è‚É£ COMPATIBILIDADE FORA DO REPLIT (CR√çTICO)

Garantir que o projeto rode corretamente em:

Frontend:

Vercel

Vite + React

Vari√°veis via import.meta.env

Backend:

Railway

Express

Banco PostgreSQL (Railway)

Nada de:

plugins Replit

paths m√°gicos

depend√™ncias impl√≠citas do Replit

7Ô∏è‚É£ VALIDA√á√ïES IMPORTANTES

Nenhuma empresa v√™ dados de outra

/loja/:slug funciona sem login

Login n√£o quebra cat√°logo p√∫blico

Build funciona localmente (npm run build)

Deploy funciona no Vercel sem ajustes manuais

8Ô∏è‚É£ N√ÉO FAZER

‚ùå N√£o remover tabelas existentes
‚ùå N√£o mudar nomes de tabelas sem necessidade
‚ùå N√£o quebrar autentica√ß√£o atual
‚ùå N√£o acoplar l√≥gica ao ambiente Replit

‚úÖ RESULTADO ESPERADO

Sistema SaaS multi-empresa real

Cada cliente com sua pr√≥pria loja p√∫blica

Admin global com vis√£o completa

Mesmo comportamento:

local

Replit

Vercel

Railway

üß™ Ap√≥s finalizar, o sistema deve permitir:
site.com/loja/lojamadrugadao
site.com/loja/distribuidora-x
site.com/loja/cliente123


Cada um com:

produtos pr√≥prios

layout pr√≥prio

pedidos pr√≥prios